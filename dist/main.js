!function(){"use strict";function t(t){const e=t.querySelector("td");if(!e)return"";const n=e.querySelector("strong");return n?n.textContent.trim():""}function e(t,e,n){const l=document.createElement("span"),i=n?t>e:t<e,r=i?"#e63946":"#2a9d60";l.style.display="inline-flex",l.style.alignItems="center",l.style.marginRight="14px",l.style.fontSize="14px",l.style.color=r,l.style.whiteSpace="break-spaces";const s=(o=t,Math.floor(o/36e5));var o;const a=function(t){return Math.floor(t%36e5/6e4)}(t),d=i?"⚠️ ":"✅ ";return l.innerHTML=`${d} <span style="font-weight: 500;">${s}t ${a}m</span>`,l}function n(l){!function(t){const l=(i=t,Math.max(...i.map(t=>t.totalTime+t.totalGapTimeMs)));var i;const r=document.getElementById("wrapperDiv"),s=document.createElement("div");s.id="gapsNLapsContainer",s.style.border="1px solid var(--atl-color-grey-20)",s.style.borderRadius="4px",s.style.backgroundColor="#FFF",s.style.color="var(--atl-color-grey-100)",s.style.marginBottom="16px";const o=document.createElement("div");o.style.display="inline-block",o.style.margin="6px 24px 6px 0",o.style.padding="10px 24px",o.style.fontSize="20px",o.style.lineHeight="24px",o.style.fontWeight="400",o.style.color="var(--atl-color-grey-100)",o.style.fontFamily="Rubik,Helvetica,Arial,'sans-serif'",o.textContent="Gaps N' Laps",s.appendChild(o);const a=document.createElement("button");a.textContent="🔄 Uppfräsk!",a.style.backgroundColor="transparent",a.style.border="none",a.style.borderRadius="4px",a.style.height="36px",a.style.margin="10px 24px",a.style.cursor="pointer",a.style.minWidth="64px",a.style.padding="0px 16px",a.style.fontSize="15px",a.style.fontWeight="500",a.style.letterSpacing="0",a.style.textAlign="center",a.style.lineHeight="36px",a.style.verticalAlign="middle",a.style.color="var(--tlx-theme-link-color)",a.style.fontFamily="Rubik,Helvetica,Arial,'sans-serif'",a.style.float="right",a.onclick=()=>{const t=document.getElementById("timeReportTable");if(t){const e=document.getElementById("gapsNLapsContainer");e&&e.remove(),n(t)}},s.appendChild(a);const d=document.createElement("div"),c="font-size: 13px; line-height: 18px; font-weight: 500; font-family: Rubik, Helvetica, Arial, sans-serif; color: #666; background: var(--tlx-theme-pastel-color); padding-top: 16px; padding-bottom: 8px;";d.style.display="flex",d.style.borderBottom="1px solid #ddd",d.innerHTML=`\n        <div style="${c} flex: 1; padding-left: 24px; padding-right: 8px;">Dag</div>\n        <div style="${c} flex: 1; padding-left: 8px; padding-right: 8px;">Overlapp</div>\n        <div style="${c} flex: 1; padding-left: 8px; padding-right: 8px;">Pause</div>\n        <div style="${c} flex: 1; padding-left: 8px; padding-right: 8px;">Tid</div>\n        <div style="${c} flex: 3; padding-left: 8px; padding-right: 24px;">Tidslinje</div>\n    `,s.appendChild(d);const p=document.createElement("div");t.forEach(t=>{const n=document.createElement("div");n.style.display="flex",n.style.alignItems="center",n.style.padding="8px 0",n.style.borderBottom="1px solid #ddd",n.style.padding="10px 24px";const i=document.createElement("div");i.style.flex="1",i.style.fontWeight="500",i.style.color="#666",i.textContent=t.dayString||"Ukjent dag",n.appendChild(i);const r=document.createElement("div");r.style.flex="1",r.appendChild(e(t.totalOverlapTimeMs,0,!0)),n.appendChild(r);const s=document.createElement("div");s.style.flex="1",s.appendChild(e(t.totalGapTimeMs,18e5,!0)),n.appendChild(s);const o=document.createElement("div");o.style.flex="1",o.appendChild(e(t.totalTime,27e6,!1)),n.appendChild(o);const a=document.createElement("div");a.style.flex="3",a.appendChild(function(t,e){const n="http://www.w3.org/2000/svg",l=document.createElementNS(n,"svg");return l.setAttribute("width","100%"),l.setAttribute("height","30"),l.setAttribute("overflow","visible"),t.intervals.forEach(i=>{const r=document.createElementNS(n,"rect"),s=(i.startTime-t.startTime)/e*100,o=(i.stopTime-i.startTime)/e*100;r.setAttribute("x",`${s}%`),r.setAttribute("y","0"),r.setAttribute("rx","5"),r.setAttribute("ry","5"),r.setAttribute("width",`${o}%`),r.setAttribute("height","30"),r.setAttribute("fill",i.color),r.setAttribute("stroke","#757c8a"),r.setAttribute("stroke-width","1"),l.appendChild(r)}),l}(t,l)),n.appendChild(a),p.appendChild(n)}),s.appendChild(p),r.appendChild(s)}(function(e){const n=[],l=new Set;let i=null;e.querySelectorAll("tr").forEach(e=>{if(e.id)i={headerRowElementId:e.id,dayString:t(e),intervals:[]},n.push(i);else if(i){const t=e.querySelector(".timeReportStopwatchIntervals strong"),n=e?.cells[1]?.textContent?.trim().replace(/\s+/g," ");n&&l.add(n),t&&i.intervals.push(...function(t,e){const n=t.trim(),l=/\((\d{2}):(\d{2})\s*-\s*(\d{2}):(\d{2})\)/g;let i;const r=[],s=new Date,o=s.getFullYear(),a=s.getMonth(),d=s.getDate();for(;null!==(i=l.exec(n));){const[,t,n,l,s]=i,c=new Date(o,a,d,t,n);let p=new Date(o,a,d,l,s);p<c&&p.setDate(p.getDate()+1),r.push({startTime:c,stopTime:p,activity:e})}return r}(t.textContent.trim(),n))}});const r=function(t){const e={},n=Math.floor(360/t.length);return t.forEach((t,l)=>{const i=l*n;e[t]=`hsla(${i}, 70%, 50%, 0.5)`}),e}(Array.from(l));return n.forEach(t=>{t.intervals.sort((t,e)=>t.startTime-e.startTime),t.intervals.forEach(t=>{t.color=r[t.activity]||"hsla(0, 0%, 0%, 0.5)"}),t.totalTime=function(t){return t.intervals.reduce((t,e)=>t+(e.stopTime-e.startTime),0)}(t),t.startTime=function(t){return t.intervals.length>0?t.intervals[0].startTime:null}(t),t.stopTime=function(t){return t.intervals.length>0?t.intervals[t.intervals.length-1].stopTime:null}(t),t.totalGapTimeMs=function(t){let e=0;for(let n=1;n<t.intervals.length;n++){const l=t.intervals[n].startTime-t.intervals[n-1].stopTime;l>0&&(e+=l)}return e}(t),t.totalOverlapTimeMs=function(t){let e=0;for(let n=1;n<t.intervals.length;n++){const l=t.intervals[n-1].stopTime-t.intervals[n].startTime;l>0&&(e+=l)}return e}(t)}),n}(l.querySelector("tbody")))}new MutationObserver(t=>{for(const e of t){const t=document.getElementById("timeReportTable");if(t&&!t.dataset._seen&&(t.dataset._seen="true",n(t)),!t){const t=document.querySelector('[data-_seen="true"]');t&&t.removeAttribute("data-_seen")}}}).observe(document.body,{childList:!0,subtree:!0})}();